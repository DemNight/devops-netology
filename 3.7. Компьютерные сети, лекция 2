# 3.7. Компьютерные сети, лекция 2


1) Проверьте список доступных сетевых интерфейсов на вашем компьютере. Какие команды есть для этого в Linux и в Windows?

```
- windows (если не использовать панель управления и диспетчер устройств): 
ipconfig (ipconfig -all) - покажет все доступные интерфейсы 
или, например
wmic nic get AdapterType, Name, MACAddress (указывая другие параметры, можно вывести любые нужные сведения)

- для Linux:

ip a или ip addr show
или, можно ещё вот так
ls /sys/class/net

```

2) Какой протокол используется для распознавания соседа по сетевому интерфейсу? Какой пакет и команды есть в Linux для этого?

```
- протокол LLDP (Link Layer Discovery Protocol)
- Пакет lldpd
lldpcli sh neigh - покажет соседей
```

3) Какая технология используется для разделения L2 коммутатора на несколько виртуальных сетей? Какой пакет и команды есть в Linux для этого? Приведите пример конфига.

```
- Технология VLAN
- пакет VLAN

пример config файла

iface eth0 inet static
      address 192.168.2.10
      netmask 255.255.255.0
      gateway 192.168.2.1
      dns-nameservers 8.8.8.8
#Interface eth0.200 - tagged vlan 200
auto eth0.200
iface eth0.200 inet static
      address 192.168.2.10
      netmask 255.255.255.0
#Interface eth1 - untagged
```

4) Какие типы агрегации интерфейсов есть в Linux? Какие опции есть для балансировки нагрузки? Приведите пример конфига.

```
- (balance-rr) — round-robin распределение пакетов между интерфейсами. Обеспечивает отказоустойчивость и повышение пропускной способности
- (active-backup) — в каждый момент времени работает только один интерфейс, в случае его выхода из строя, mac-адрес назначается второму интерфейсу и трафик переключается на него
- (balance-xor) — обеспечивает балансировку между интерфейсами на основании MAC-адресов отправителя и получателя
- (broadcast) — отправляет пакеты через все интерфейсы одновременно, обеспечивает отказоустойчивость
- (802.3ad) — обеспечивает агрегацию на основании протокола 802.3ad
- (balance-tlb) — в этом режиме входящий трафик приходит только на один «активный» интерфейс, исходящий же распределяется по всем интерфейсам
- (balance-alb) — балансирует исходящий трафик как tlb, а так же входящий IPv4 трафик используя ARP

пример (active-backup)
 network:
   version: 2
   renderer: networkd
   ethernets:
     ens3:
       dhcp4: no 
       optional: true
     ens5: 
       dhcp4: no 
       optional: true
   bonds:
     bond0: 
       dhcp4: yes 
       interfaces:
         - ens3
         - ens5
       parameters:
         mode: active-backup
         primary: ens3
         mii-monitor-interval: 2
```

5) Сколько IP адресов в сети с маской /29 ? Сколько /29 подсетей можно получить из сети с маской /24. Приведите несколько примеров /29 подсетей внутри сети 10.10.10.0/24.

```
- Сколько IP адресов в сети с маской /29 ?

8 адресов (из них 1-й - адрес сети, последний - широковещательный)

- Сколько /29 подсетей можно получить из сети с маской /24?

32 подсети. 

- Приведите несколько примеров /29 подсетей внутри сети 10.10.10.0/24.

10.10.10.8/29
10.10.10.128/29
10.10.10.232/29

```

6) Задача: вас попросили организовать стык между 2-мя организациями. Диапазоны 10.0.0.0/8, 172.16.0.0/12, 192.168.0.0/16 уже заняты. Из какой подсети допустимо взять частные IP адреса? Маску выберите из расчета максимум 40-50 хостов внутри подсети.

```
В этом случае остаётся только 100.64.0.0/10. 
При указанных в задаче количестве "устройств", маска будет /26 (минимальное значение, в которое вписывается нужное число хостов). 
В этом случае можно будет получить 64 адреса (минус широковещательный и адрес сети - 62)
```

7) Как проверить ARP таблицу в Linux, Windows? Как очистить ARP кеш полностью? Как из ARP таблицы удалить только один нужный IP?

```
- Проверить таблицу:

Linux: ip neigh, arp -n
Windows: arp -a

- Очистить кэш:

Linux: ip neigh flush
Windows: arp -d *

- Удалить один IP:

Linux: ip neigh delete <IP> dev <INTERFACE>, arp -d <IP>
Windows: arp -d <IP>
```

